<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
  <meta name="keyword" content="二分之一,web前端,前端博客,树莓派,RaspberryPi,html5,css3,as3,javascript" />
  <meta name="description" content="二分之一博客是一个关注web前端及游戏前端的技术博客" />
  <title>二分之一 - Just Jason's Blog</title>
  <link rel="stylesheet" type="text/css" href="/assets/css/style.css?version=20140909" />
  <link rel="stylesheet" type="text/css" href="/assets/css/highlight/pojoaque.css?version=20140909" />
  <link rel="stylesheet" type="text/css" href="http://fonts.useso.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />
  <!--[if lt IE 9]><script src="/assets/js/html5.js?version=20140909"></script><![endif]-->
</head>

<body>
<div class="toolbar">
    <div class="nav-wrapper clearfix">
        <ul class="nav-list">
            <li>
                <a href="/tag/Unity3D">Unity3D</a>
            </li>
            <li>
                <a href="/tag/javascript">Javascript</a>
            </li>
            <li>
                <a href="/tag/NodeJs">NodeJs</a>
            </li>
            <li>
                <a href="/tag/html5">Html5</a>
            </li>
            <li>
                <a href="/tag/RaspberryPi">Raspberry Pi</a>
            </li>
            <li>
                <a href="/tag/metalsmith">Metalsmith</a>
            </li>
        </ul>

        <ul class="nav-list menu">
            <li>
                <a href="/about.html">关于我</a>
            </li>
            <li>
                <a href="/mobile/">
                    <i class="mobile_icon"></i><span class="mobile_msg">手机访问</span>
                </a>
            </li>
        </ul>
    </div>
</div>

<header class="top-header">
	<section>
    	<a href="/" class="logo"></a>
        <h1 class="blog-name">二分之一</h1>
        <h2 class="blog-description">Just Jason's Blog</h2>
    </section>
</header>


<div class="wrapper">

    <article class="post">
        <header class="post-header">
            <span class="post-meta">
                <time datetime="2012年5月30日">2012年5月30日</time>
                <em>on</em>
                <a href="/tag/javascript">javascript</a>
            </span>
            <h2><a href="/post/jlinq-jquery-filedrop">推荐两个JS框架：jLinq、jquery.filedrop</a></h2>
        </header>
        <h5 id="-jlinq">一、jLinq</h5>
<p>jLinq 是一个用来编写JavaScript对象数组查询的JavaScript库,可以对数组对象执行类似于LINQ风格的查询。</p>
<p>项目主页：<a href="http://www.hugoware.net/Projects/jLinq">http://www.hugoware.net/Projects/jLinq</a></p>
<p><img src="/assets/upload/16-33-32a.jpg" alt=""></p>
<h4 id="-jquery-filedrop">二、jquery-filedrop</h4>
<p>filedrop是一个html5图片拖拽上传的JS框架，能批量将电脑上的图片拖拽至浏览器，读取图片的二进制，并组装成post包，配合后台程序完成图片上传。</p>
<p>使用HTML5上传文件其实综合使用了3种技术，新的File Reader API，还有新的Drag&amp;Drop API，以及AJAX技术（包含2进制的数据传输），filedrop对这三个功能进行的了整合封装。</p>
<p>项目地址：<a href="https://github.com/weixiyen/jquery-filedrop">https://github.com/weixiyen/jquery-filedrop</a></p>

        <p><a href="/post/jlinq-jquery-filedrop" rel="nofollow" class="read-more">Read more »</a></p>
    </article>
    <article class="post">
        <header class="post-header">
            <span class="post-meta">
                <time datetime="2012年4月25日">2012年4月25日</time>
                <em>on</em>
                <a href="/tag/NodeJs">NodeJs</a>
            </span>
            <h2><a href="/post/suse10-node-js-openssl-not-found">suse10下nodejs安装时提示openssl not found的问题解决办法</a></h2>
        </header>
        <h5 id="1-openssl-">1、首先确认openssl有没有安装，使用命令</h5>
<pre><code class="hljs shell"><span class="hljs-title">openssl</span> version
</code></pre>
<h5 id="2-openssl-nodejs-openssl-not-found">2、明明已经安装了openssl，在安装nodejs时还提示openssl not found</h5>
<p>以ubuntu为例，只要使用在线安装命令安装libssl-dev就可发解决问题，但是对于不能连外网且使用suse的系统怎么办，这个头痛的问题困扰了我一天，终于得以解决。</p>
<p>ubuntu下解决办法:</p>
<pre><code class="hljs shell">sudo apt-<span class="hljs-built_in">get</span> install libssl-<span class="hljs-built_in">dev</span>
</code></pre>
<p><strong>suse10下且不能联网的解决办法:</strong></p>
<p>在解决这个问题的过程中，我重装了一遍openssl，发现安装完成时，程序进行了.pc文件的拷贝，过程如下：</p>
<pre><code class="hljs shell">cp libcrypto.pc <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ssl/</span>lib/pkgconfig
chmod <span class="hljs-number">644</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ssl/</span>lib<span class="hljs-regexp">/pkgconfig/</span>libcrypto.pc
cp libssl.pc <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ssl/</span>lib/pkgconfig
chmod <span class="hljs-number">644</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ssl/</span>lib<span class="hljs-regexp">/pkgconfig/</span>libssl.pc
cp openssl.pc <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ssl/</span>lib/pkgconfig
chmod <span class="hljs-number">644</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ssl/</span>lib<span class="hljs-regexp">/pkgconfig/</span>openssl.pc
</code></pre>
<p>再打开nodejs的安装文件中的wscript，发现里面对openssl path有一些这样的描述<code>/usr/local/lib</code>，对此我做了一个猜想，至所以通过openssl检测，是因为nodejs默认是在这个目录找的openssl。大概就是只要找到openssl package 或者 找到function SSL_library_init 即可通过 openssl的检查。</p>
<p>结合以上两点，给出解决方法：
将<code>libcrypto.pc</code>、<code>libssl.pc</code>、<code>openssl.pc</code>拷贝到<code>/usr/local/lib/pkgconfig</code>目录下</p>
<pre><code class="hljs shell">cp <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ssl/</span>lib<span class="hljs-regexp">/pkgconfig/</span>libcrypto.pc <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/lib/</span>pkgconfig/libcrypto.pc
cp <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ssl/</span>lib<span class="hljs-regexp">/pkgconfig/</span>libssl.pc <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/lib/</span>pkgconfig/libssl.pc
cp <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/ssl/</span>lib<span class="hljs-regexp">/pkgconfig/</span>openssl.pc <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/lib/</span>pkgconfig/openssl.pc
</code></pre>
<p>再次安装node，不再报错，成功安装。</p>
<p>如果没有取得openssl支持的时候，官方提示通过./configure –without-ssl来跳过openssl的检测，虽然安装node可以成功，但是在高级的应用开发中，将变的举步维坚，一般的connect和express模块都用到了Crypto加密模块，而Crypto加密模块又是基于openssl底层支持的，所以没有openssl只能玩一些简单nodejs case。</p>

        <p><a href="/post/suse10-node-js-openssl-not-found" rel="nofollow" class="read-more">Read more »</a></p>
    </article>
    <article class="post">
        <header class="post-header">
            <span class="post-meta">
                <time datetime="2012年4月22日">2012年4月22日</time>
                <em>on</em>
                <a href="/tag/NodeJs">NodeJs</a>
            </span>
            <h2><a href="/post/node-js-canvas-base64">使用nodejs将html5 canvas base64编码图片保存为文件</a></h2>
        </header>
        <p>目前流行的“你画我猜”应用，你有没有想过使用HTML5来实现过？那么不可避免的需要解决canvas保存图片到硬盘或mongodb之类的数据库。本文主要介绍使用nodejs将html5 canvas base64编码图片保存为文件，同时提供两种解决方案。</p>
<p>html5 canvas属于客户端API，没有权限去保存图片到硬盘，只有canvas . toDataURL()这一个接口可导出画布的base64编码，以提供给服务端进行处理保存，据我所知.net和php都有方法或类来进行简单的处理保存。nodejs呢？是的，没错！nodejs同样有能力来保存base64编码的图片。</p>
<h4 id="-">解决方案一：</h4>
<p>使用new Buffer来创建对应编码的缓冲，通过fs模块将Buffer写成一个文件。</p>
<p><strong>优点：</strong>简单易用，无需其它模块的支持。</p>
<p><strong>缺点：</strong>不能对图片的尺寸，水印，压缩，格式等进行处理。</p>
<p><strong>注意点：</strong></p>
<p>1、new Buffer接收到base64编码，不能带data:URL，而使用canvas . toDataURL()导出的base64编码会带data:URL，所以需要先过滤掉</p>
<p>类似这样的一段“data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0”</p>
<p>需过滤成：“iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0”</p>
<p>2、’binary’ – 一种只使用每个字符前8个字节将原始的二进制数据编码进字符串的方式。这个方式已经废弃，应当尽量使用buffer 对象。这个编码将会在未来的node 中删除。</p>
<p>看到有人把base64声明的Buffer再转换成binary，这个是完全没必要的。</p>
<p>3、生成的图片有size变化，但是打开后是一个无效的图像，这个看本文的第三点。</p>
<p>使用express搭建的/upload (POST)上传保存接口，完成代码如下：</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">var</span> express = <span class="hljs-keyword">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">var</span> fs = <span class="hljs-keyword">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">var</span> app = module.exports = express();
<span class="hljs-comment">//配置</span>
app.configure(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  app.<span class="hljs-keyword">use</span>(express.bodyParser());
  app.<span class="hljs-keyword">use</span>(express.methodOverride());
  app.<span class="hljs-keyword">use</span>(express.cookieParser(<span class="hljs-string">'keyboard cat'</span>));
  app.<span class="hljs-keyword">use</span>(express.session());
  app.<span class="hljs-keyword">use</span>(app.router);
  app.<span class="hljs-keyword">use</span>(express.<span class="hljs-keyword">static</span>(__dirname + <span class="hljs-string">'/up'</span>)); <span class="hljs-comment">//静态文件目录</span>
  app.<span class="hljs-keyword">use</span>(express.errorHandler({ dumpExceptions: <span class="hljs-keyword">true</span>, showStack: <span class="hljs-keyword">true</span> }));
});
<span class="hljs-comment">//保存base64图片POST方法</span>
app.post(<span class="hljs-string">'/upload'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(req, res)</span></span>{
    <span class="hljs-comment">//接收前台POST过来的base64</span>
    <span class="hljs-keyword">var</span> imgData = req.body.imgData;
    <span class="hljs-comment">//过滤data:URL</span>
    <span class="hljs-keyword">var</span> base64Data = imgData.replace(/^data:image\/\w+;base64,/, <span class="hljs-string">""</span>);
    <span class="hljs-keyword">var</span> dataBuffer = <span class="hljs-keyword">new</span> Buffer(base64Data, <span class="hljs-string">'base64'</span>);
    fs.writeFile(<span class="hljs-string">"out.png"</span>, dataBuffer, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> </span>{
        <span class="hljs-keyword">if</span>(err){
          res.send(err);
        }<span class="hljs-keyword">else</span>{
          res.send(<span class="hljs-string">"保存成功！"</span>);
        }
    });
});
<span class="hljs-keyword">if</span> (!module.<span class="hljs-keyword">parent</span>) {
  app.listen(<span class="hljs-number">8000</span>);
  console.log(<span class="hljs-string">'Express started on port 8000'</span>);
}
</code></pre>

        <p><a href="/post/node-js-canvas-base64" rel="nofollow" class="read-more">Read more »</a></p>
    </article>
    <article class="post">
        <header class="post-header">
            <span class="post-meta">
                <time datetime="2012年4月19日">2012年4月19日</time>
                <em>on</em>
                <a href="/tag/javascript">javascript</a>
            </span>
            <h2><a href="/post/easyui-datagrid-js">Easyui实现datagrid绑定JS本地对象（可不请求URL，不生成JSON）</a></h2>
        </header>
        <p>初次接触easyui，使用datagrid时绑定数据时，大多人骂他的设计很烂，一定要在URL中指定一个json文件，或者请求一个服务器端动态生成的json程序，而在实际的开发中，后台程序很少愿意给到完全符合前台开发理想中的数据结构。</p>
<p>其实不然，我们接触一个新的东西时，遇到问题，总是习惯于到搜索引擎去寻求答案，而不愿意从API中找到答案，当然大家没这么多时间耗在这么长的英文API中。</p>
<p>easyui，datagrid使用，其实可以读取JS本地拼接组合的JSON对象的。</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-title">table</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"tt"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">table</span>&gt;</span>
</code></pre>
<pre><code class="hljs javascript"><span class="hljs-comment">//仅做一些基本的设置，不设置URL属性</span>
$(<span class="hljs-string">'#tt'</span>).datagrid({
<span class="hljs-label">    width:</span><span class="hljs-number">300</span>,
<span class="hljs-label">    heigth:</span><span class="hljs-string">"auto"</span>,
<span class="hljs-label">    fitColumns:</span><span class="hljs-literal">true</span>
});
<span class="hljs-comment">//绑定本地的JS对象</span>
var jsdata = {<span class="hljs-string">total:</span><span class="hljs-number">1</span>,<span class="hljs-string">rows:</span>[{<span class="hljs-string">name:</span><span class="hljs-string">""</span>,<span class="hljs-string">value:</span><span class="hljs-string">""</span>}]}
$(<span class="hljs-string">'#tt'</span>).datagrid(<span class="hljs-string">"loadData"</span>,jsdata);
</code></pre>
<p>jQuery EasyUI中文帮助手册（API）：<a href="http://www.phptogether.com/juidoc/">http://www.phptogether.com/juidoc/</a>
jQuery EasyUI英文官方手册（API）：<a href="http://www.jeasyui.com/documentation/index.php">http://www.jeasyui.com/documentation/index.php</a></p>

        <p><a href="/post/easyui-datagrid-js" rel="nofollow" class="read-more">Read more »</a></p>
    </article>
    <article class="post">
        <header class="post-header">
            <span class="post-meta">
                <time datetime="2012年4月19日">2012年4月19日</time>
                <em>on</em>
                <a href="/tag/NodeJs">NodeJs</a>
            </span>
            <h2><a href="/post/ubuntu-node-canvas">ubuntu下安装node-canvas实现nodejs服务器图片处理</a></h2>
        </header>
        <p>node-canvas是基于cairo移植过来的，所以需要cairo支持。因为要处理png和jpg，gif等图像，所以同时需要这几个库的支持。
node-canvas代码仓库：<a href="https://github.com/LearnBoost/node-canvas">https://github.com/LearnBoost/node-canvas</a></p>
<p><strong>1、安装cairo</strong></p>
<pre><code class="hljs shell">sudo apt-<span class="hljs-built_in">get</span> install libcairo2-<span class="hljs-built_in">dev</span>
</code></pre>
<p><strong>2、安装png、jpg、gif支持库</strong></p>
<pre><code class="hljs shell">sudo apt-<span class="hljs-built_in">get</span> install libpng-<span class="hljs-built_in">dev</span>
sudo apt-<span class="hljs-built_in">get</span> install libjpeg-<span class="hljs-built_in">dev</span>
sudo apt-<span class="hljs-built_in">get</span> install libgif-<span class="hljs-built_in">dev</span>
</code></pre>
<p><strong>3、安装node-canvas</strong></p>
<pre><code class="hljs shell">sudo apt-get install <span class="hljs-keyword">canvas</span>
</code></pre>
<p>一般情况下，安装完上面三部，node-canvas就正常运行了，但一般人会跳过第二步，虽然node-canvas可以安装成功，
但是canvas.createJPEGStream方法或报系统错误，遇到这种情况，安装完第二步之后，要重新安装node-canvas，以便获得最新的jpeg等库的支持。</p>

        <p><a href="/post/ubuntu-node-canvas" rel="nofollow" class="read-more">Read more »</a></p>
    </article>
    <article class="post">
        <header class="post-header">
            <span class="post-meta">
                <time datetime="2012年4月8日">2012年4月8日</time>
                <em>on</em>
                <a href="/tag/NodeJs">NodeJs</a>
            </span>
            <h2><a href="/post/mongodb-windows-install">下载安装和配置MongoDB(windows)</a></h2>
        </header>
        <p><strong>安装Mongo数据库：</strong></p>
<p>第一步：下载安装包：官方下载地址←单击此处,如果是win系统，注意是64位还是32位版本的，请选择正确的版本。</p>
<p>第二步：新建目录“F:\MongoDB”(目录可自定义)。解压下载的安装包，找到bin目录下面全部文件，拷贝到刚创建的目录下。</p>
<p>第三步：在“F:\MongoDB”目录下新建“data”文件夹，它将会作为数据存放的根文件夹。</p>
<p><strong>配置Mongo服务端：</strong></p>
<p>windows下打开CMD窗口，按照如下方式输入命令：</p>
<p>1、配置数据存放的根文件夹</p>
<pre><code class="hljs shell">F:
cd /MongoDB
mongod --dbpath F:<span class="hljs-command">\MongoDB</span><span class="hljs-command">\data</span>
</code></pre>
<p>2、配置日志文件存放目录</p>
<pre><code class="hljs shell">mongod --logpath F:<span class="hljs-command">\MongoDB</span><span class="hljs-command">\logs</span><span class="hljs-command">\mongodb</span>.log
</code></pre>
<p>3、将MongoDB 作为 Windows 服务随机启动</p>
<pre><code class="hljs shell">mongod <span class="hljs-comment">--install</span>
</code></pre>
<p>在浏览器输入：<a href="http://localhost:27017/，可以看到如下提示：">http://localhost:27017/，可以看到如下提示：</a></p>
<blockquote>
<p>You are trying to access MongoDB on the native driver port. For http diagnostic access, add 1000 to the port number</p>
</blockquote>
<p>如此，MongoDB数据库服务已经成功启动了。</p>

        <p><a href="/post/mongodb-windows-install" rel="nofollow" class="read-more">Read more »</a></p>
    </article>
    <article class="post">
        <header class="post-header">
            <span class="post-meta">
                <time datetime="2012年4月8日">2012年4月8日</time>
                <em>on</em>
                <a href="/tag/NodeJs">NodeJs</a>
            </span>
            <h2><a href="/post/node-js-zhou-bian-ku">node.js周边库学习资源列表</a></h2>
        </header>
        <p>好久没有更新博客了，最近的业余时间在专心于node.js相关的学习了，学习列表，和大家共享：</p>
<blockquote>
<p>npm：NodeJs包管理器</p>
<p>express：服务器端比较流行的MVC框架，处理服务请求，路由转发，逻辑处理</p>
<p>mongoose：mongodb包装，更方便使用数据库</p>
<p>socket.io：实现服务端和客户端socket通信解决方案</p>
<p>backbone：客户端MVC框架，编写客户端应用（豆瓣说）</p>
<p>coffeescript：提高JavaScript的可读性，健壮性</p>
<p>zombie：浏览器子集，编写html解析器，轻形javascript客户端测试</p>
</blockquote>

        <p><a href="/post/node-js-zhou-bian-ku" rel="nofollow" class="read-more">Read more »</a></p>
    </article>
    <article class="post">
        <header class="post-header">
            <span class="post-meta">
                <time datetime="2012年3月21日">2012年3月21日</time>
                <em>on</em>
                <a href="/tag/html5">html5</a>
                ,
                <a href="/tag/canvas">canvas</a>
            </span>
            <h2><a href="/post/html5-yu-gang">html5鱼缸DEMO（基于ocanvas）</a></h2>
        </header>
        <p>看了一下ocanvas的api，但不能验证其实用性，</p>
<p>花了点时间写了一个简单的鱼缸DEMO。发现框架有时控制不够灵活，原生的HTML5 canvas接口也蛮好用的。</p>
<p>在线DEMO：<a href="http://www.2fz1.com/demo/?pos=2">http://www.2fz1.com/demo/?pos=2</a></p>
<p>ocanvas框架官网：<a href="http://www.ocanvas.org">http://www.ocanvas.org</a></p>
<p>本DEMO素材来源于微软的一个HTML5测试用例。</p>
<p>鱼缸DEMO中，鱼的轨迹没有时间细想，简单的实现了一下。</p>

        <p><a href="/post/html5-yu-gang" rel="nofollow" class="read-more">Read more »</a></p>
    </article>
    <article class="post">
        <header class="post-header">
            <span class="post-meta">
                <time datetime="2012年3月20日">2012年3月20日</time>
                <em>on</em>
                <a href="/tag/html5">html5</a>
                ,
                <a href="/tag/canvas">canvas</a>
            </span>
            <h2><a href="/post/canvas-loading-icon">图片资源加载类及canvas loading icon</a></h2>
        </header>
        <p>Load.js类及DEMO下载：<a href="/assets/upload/canvas_loading_icon_demo.zip" title="demo">demo</a></p>
<p>在线DEMO：<a href="http://www.2fz1.com/demo/?pos=1">http://www.2fz1.com/demo/?pos=1</a></p>
<p>默认效果图：</p>
<p><img src="/assets/upload/20120320110407.jpg" alt=""></p>
<h4 id="-">一、基础用法：</h4>
<p>引入Load.js文件到页面。</p>
<p>1、【可选】首先设置loading icon的canvas id；如不需要显示loading icon，可以不设置</p>
<pre><code class="hljs javascript"><span class="hljs-tag">Load</span><span class="hljs-class">.setLoadIcon</span>(<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">id</span>:<span class="hljs-value"><span class="hljs-string">"loadicon"</span>
</span></span></span>});
</code></pre>
<p>2、调用图片加载方法</p>
<pre><code class="hljs javascript">Load.loadImage({
    list:[{id:<span class="hljs-string">""</span>,src:<span class="hljs-string">""</span>}], <span class="hljs-comment">//资源列表，Array</span>
    onload:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span></span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"单个资源完成："</span>+data.src+<span class="hljs-string">"；其它信息："</span>+data.msg);
    },
    oncomplete:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span></span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"加载完成，总资源数量："</span>+data.imgLen+<span class="hljs-string">"；出错个数："</span>+data.imgErrLen);
    },
    onerror:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span></span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"加载出错："</span>+data.msg);
    },
    onprogress:<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span></span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"进度："</span>+<span class="hljs-built_in">Math</span>.round(data.loadImgLen/data.imgLen*<span class="hljs-number">100</span>)+<span class="hljs-string">"%；当前资源："</span>+data.src);
    },
    showLoadIcon:<span class="hljs-literal">true</span>
});
</code></pre>
<h4 id="-loading-icon-">二、loading icon自定义样式</h4>
<pre><code class="hljs javascript">Load.setLoadIcon({
<span class="hljs-label">    id:</span><span class="hljs-string">"loadicon"</span>,
<span class="hljs-label">    loadTextColor:</span><span class="hljs-string">"#ffffff"</span>,
<span class="hljs-label">    loadTextAlpha:</span><span class="hljs-number">1</span>,
<span class="hljs-label">    loadColor:</span><span class="hljs-string">"#ffffff"</span>,
<span class="hljs-label">    loadAlpha:</span><span class="hljs-number">1</span>,
<span class="hljs-label">    focusColor:</span><span class="hljs-string">"#ff0000"</span>
});
</code></pre>
<p>效果图：</p>
<p><img src="/assets/upload/20120320110431.jpg" alt=""></p>
<p>完整设置示例：</p>
<pre><code class="hljs javascript">Load.setLoadIcon({
<span class="hljs-label">    id:</span><span class="hljs-string">"loadicon"</span>, <span class="hljs-comment">//canvas id [必选，下面的参数都为可选]</span>
<span class="hljs-label">    loadTextColor:</span><span class="hljs-string">"#ffffff"</span>, <span class="hljs-comment">//百分比进度文字颜色</span>
<span class="hljs-label">    loadTextAlpha:</span><span class="hljs-number">1</span>, <span class="hljs-comment">//百分比进度文字颜色透明度[0-1]</span>
<span class="hljs-label">    loadColor:</span><span class="hljs-string">"#ffffff"</span>, <span class="hljs-comment">//加载背景圆颜色</span>
<span class="hljs-label">    loadAlpha:</span><span class="hljs-number">1</span>, <span class="hljs-comment">//加载背景圆颜色透明度[0-1]</span>
<span class="hljs-label">    focusColor:</span><span class="hljs-string">"#ff0000"</span>, <span class="hljs-comment">//焦点圆颜色</span>
<span class="hljs-label">    width:</span><span class="hljs-number">60</span>, <span class="hljs-comment">//icon宽</span>
<span class="hljs-label">    height:</span><span class="hljs-number">60</span>, <span class="hljs-comment">//icon高，请和宽保持一致</span>
<span class="hljs-label">    circleR:</span><span class="hljs-number">4</span>, <span class="hljs-comment">//小圆的半径</span>
<span class="hljs-label">    circleCount:</span><span class="hljs-number">10</span>, <span class="hljs-comment">//小圆的个数</span>
<span class="hljs-label">    showLoadText:</span><span class="hljs-literal">true</span>, <span class="hljs-comment">//是否显示百分比进度文字</span>
<span class="hljs-label">    loadTextSize:</span><span class="hljs-number">16</span> <span class="hljs-comment">//进度文字尺寸,px</span>
});
</code></pre>

        <p><a href="/post/canvas-loading-icon" rel="nofollow" class="read-more">Read more »</a></p>
    </article>
    <article class="post">
        <header class="post-header">
            <span class="post-meta">
                <time datetime="2012年3月19日">2012年3月19日</time>
                <em>on</em>
                <a href="/tag/javascript">javascript</a>
            </span>
            <h2><a href="/post/deng-fen-dian">JS计算圆周上N个等分点的坐标</a></h2>
        </header>
        <p>用canvas做一个loading icon，需要用到圆周上等分点坐标的计算，算法如下：</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">var</span> loadPoint = []; <span class="hljs-comment">//结果</span>
<span class="hljs-comment">/*
*求圆周上等分点的坐标
*ox,oy为圆心坐标
*r为半径
*count为等分个数
*/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLoadPoint</span><span class="hljs-params">(r,ox,oy,count)</span></span>{
    <span class="hljs-keyword">var</span> radians = (<span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">180</span>) * <span class="hljs-built_in">Math</span>.round(<span class="hljs-number">360</span> / count); <span class="hljs-comment">//弧度</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; count; i++){
        <span class="hljs-keyword">var</span> x = ox + r * <span class="hljs-built_in">Math</span>.sin(radians * i);
        <span class="hljs-keyword">var</span> y = oy + r * <span class="hljs-built_in">Math</span>.cos(radians * i);
        loadPoint.unshift({x:x,y:y}); <span class="hljs-comment">//为保持数据顺时针</span>
    }
}
</code></pre>

        <p><a href="/post/deng-fen-dian" rel="nofollow" class="read-more">Read more »</a></p>
    </article>

    <nav role="navigation" class="pagination">
        <a href="/index/5" class="newer-posts">← Newer Posts</a>
        
    	<span class="page-number">Page 6 of 8</span>
        
        <a href="/index/7/" class="older-posts">Older Posts →</a>
	</nav>


</div>

<footer>
	<p class="copyright">&copy; 2014 <a href="/">Jason’s Blog</a>. All rights reserved.</p>
    <p>Proudly published with <a href="http://metalsmith.io/" target="_blank">Metalsmith</a></p>
    <p><a href="http://www.miibeian.gov.cn/" target="_blank">闽ICP备09029032号-1</a> |
        <script language="javascript" type="text/javascript" src="http://js.users.51.la/6883474.js"></script></p>
</footer>

<script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="/assets/uitotop/js/easing.js?version=20140909"></script>
<script type="text/javascript" src="/assets/uitotop/js/jquery.ui.totop.min.js?version=20140909"></script>
<script src="/assets/js/app.js?version=20140909"></script>
<!--[if lt IE 8]><script src="/assets/js/noLtIE8.js?version=20140909"></script><![endif]-->

</body>
</html>
